<!DOCTYPE html>
<html>
<head>
  <title>Clipboard Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    button {
      padding: 10px 15px;
      margin: 10px 5px;
      cursor: pointer;
    }
    textarea {
      width: 100%;
      height: 200px;
      margin: 10px 0;
    }
    .success {
      color: green;
      font-weight: bold;
    }
    .error {
      color: red;
      font-weight: bold;
    }
    .log {
      font-family: monospace;
      background: #f5f5f5;
      padding: 10px;
      border: 1px solid #ddd;
      height: 200px;
      overflow: auto;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Clipboard Test Page</h1>
  
  <h2>Test Content</h2>
  <textarea id="content">This is test content to copy to clipboard. If you see this in your clipboard after clicking the buttons below, the copy functionality is working correctly.</textarea>
  
  <h2>Test Methods</h2>
  <div>
    <button id="clipboardApi">Copy with navigator.clipboard</button>
    <button id="execCommand">Copy with execCommand</button>
    <button id="visibleTextarea">Copy with Visible Textarea</button>
  </div>
  
  <h2>Status</h2>
  <div id="status">Ready to test...</div>
  
  <h2>Log</h2>
  <div class="log" id="log"></div>
  
  <script>
    // Log function
    function log(message, isError = false) {
      const logElem = document.getElementById('log');
      const entry = document.createElement('div');
      entry.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
      if (isError) entry.style.color = 'red';
      logElem.appendChild(entry);
      logElem.scrollTop = logElem.scrollHeight;
      console.log(message);
    }
    
    // Status update function
    function updateStatus(message, isSuccess = true) {
      const statusElem = document.getElementById('status');
      statusElem.textContent = message;
      statusElem.className = isSuccess ? 'success' : 'error';
    }
    
    // Get content
    function getContent() {
      return document.getElementById('content').value;
    }
    
    // Test navigator.clipboard API
    document.getElementById('clipboardApi').addEventListener('click', async () => {
      try {
        const content = getContent();
        log(`Attempting to copy ${content.length} characters with navigator.clipboard...`);
        
        await navigator.clipboard.writeText(content);
        
        log('navigator.clipboard.writeText succeeded!');
        updateStatus('Copied with navigator.clipboard! Try pasting somewhere.');
      } catch (error) {
        log(`navigator.clipboard failed: ${error.message}`, true);
        updateStatus(`Failed: ${error.message}`, false);
      }
    });
    
    // Test execCommand
    document.getElementById('execCommand').addEventListener('click', () => {
      try {
        const content = getContent();
        log(`Attempting to copy ${content.length} characters with execCommand...`);
        
        const textArea = document.createElement('textarea');
        textArea.value = content;
        textArea.style.position = 'fixed';
        textArea.style.left = '-9999px';
        textArea.style.top = '-9999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        const success = document.execCommand('copy');
        document.body.removeChild(textArea);
        
        if (success) {
          log('execCommand copy succeeded!');
          updateStatus('Copied with execCommand! Try pasting somewhere.');
        } else {
          log('execCommand returned false', true);
          updateStatus('execCommand returned false', false);
        }
      } catch (error) {
        log(`execCommand failed: ${error.message}`, true);
        updateStatus(`Failed: ${error.message}`, false);
      }
    });
    
    // Test with visible textarea
    document.getElementById('visibleTextarea').addEventListener('click', () => {
      try {
        log('Attempting to copy with visible textarea...');
        updateStatus('Select all text in the textarea above and press Ctrl+C/Cmd+C', true);
        
        const textarea = document.getElementById('content');
        textarea.focus();
        textarea.select();
        
        log('Text selected. Please press Ctrl+C/Cmd+C manually.');
      } catch (error) {
        log(`Visible textarea selection failed: ${error.message}`, true);
        updateStatus(`Failed: ${error.message}`, false);
      }
    });
    
    // Initial log
    log('Clipboard test page loaded. Click a button to test.');
  </script>
</body>
</html>
